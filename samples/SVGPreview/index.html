<script src="https://raw.github.com/r4z0rw0lf/SuperCanvas/master/superCanvas.js"></script>
<style>
* {
	font-family: helvetica neue, helvetica, arial, sans;
}
input[type="range"] + output {
	background: -webkit-linear-gradient(top, #eee 0%, #aaa 100%);
	display: none;
	text-align: center;
	height: 20px;
	width: 30px;
	border: 1px solid #ddd;
	border-radius: 5px;
	position: absolute;
}
input[type="range"] + output:after {
	position: absolute;
	content: "";
	border: 5px solid transparent;
	border-bottom: 0;
	border-top-color: #aaa;
	bottom:-5px;
	left: 50%;
	margin-left: -5px;
}
</style>
<div style="float: left;">
	SVG preview:<br/>
<svg width="256" height="256" viewbox="0 0 32 32" preserveAspectRatio="none none">
<path fill="black" d="m0,0z"/>
</svg>
</div>
<div style="float: left;border-left: 1px solid #ddd;">
	SuperCanvas Rendering:<br/>
<canvas width="256" height="256">
</canvas>
</div>
<br>
<textarea rows="10" style="font-family: courier new; width: 98%">
M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466z
M16,29.534C8.539,29.534,2.466,23.462,2.466,16C2.466,8.539,8.539,2.466,16,2.466c7.462,0,13.535,6.072,13.535,13.533C29.534,23.462,23.462,29.534,16,29.534z
M11.104,14c0.932,0,1.688-1.483,1.688-3.312s-0.755-3.312-1.688-3.312s-1.688,1.483-1.688,3.312S10.172,14,11.104,14z
M20.729,14c0.934,0,1.688-1.483,1.688-3.312s-0.756-3.312-1.688-3.312c-0.932,0-1.688,1.483-1.688,3.312S19.798,14,20.729,14z
M8.143,21.189C10.458,24.243,13.148,26,16.021,26c2.969,0,5.745-1.868,8.11-5.109c-2.515,1.754-5.292,2.734-8.215,2.734C13.164,23.625,10.54,22.756,8.143,21.189z</textarea>
<small>smiley icon from <a href="http://raphaeljs.com/icons/">http://raphaeljs.com/icons/</a></small>
<br>
viewbox-x: <input type="range" min="1" max="500" value="32" id="vbX"><br/>
viewbox-y: <input type="range" min="1" max="500" value="32" id="vbY"><br/>
<input type="button" value="go" id="go"/>
<script>
canvas = document.querySelector("canvas");
context = superCanvas(canvas);
vbX = document.querySelector("#vbX");
vbY = document.querySelector("#vbY");
svg = document.querySelector("svg")
function draw(){
canvas.width += 0;
context.scale(canvas.width / parseInt(vbX.value,10),canvas.height / parseInt(vbY.value,10));
svg.setAttribute("viewBox", "0 0 "+vbX.value+" "+vbY.value);
    path = document.querySelector("textarea").value;
context.drawPath(path);
document.querySelector("path").setAttribute("d",path);
context.fill();

};
    draw();
    [].slice.apply(document.querySelectorAll("#vbX, #vbY, #go")).forEach(function(input){input.addEventListener("click", draw, false);});
    [].slice.apply(document.querySelectorAll("#vbX, #vbY")).forEach(function(input){
    	out = document.createElement("output");
    	out.innerHTML = "";
    	input.parentNode.insertBefore(out, input.nextSibling);
    	(function(o){
    		input.addEventListener("mousedown", function(e){
    			o.style.display="inline-block";
    		}, false);
    		input.addEventListener("mouseup", function(e){
    			o.style.display="none";
    		}, false);
    		input.addEventListener("mouseout", function(e){
    			o.style.display="none";
    		}, true);

    		input.addEventListener("mousemove", function(e){
    			if(this.offsetLeft > e.clientX || this.offsetLeft+this.clientWidth < e.clientX) return;
    			pos = e.clientX-15;//(this.value;
    			o.style.left = pos+"px";
    			//if(parseInt(this.value) <= parseInt(this.min) || parseInt(this.value) >= parseInt(this.max)) return;
    			///o.style.margin
    			o.style.marginTop = "-25px";
    			//out.style.top = e.clientY+"px";
    			o.innerHTML = this.value;
    			
    		}, false);
    	})(out);
    });

</script>
