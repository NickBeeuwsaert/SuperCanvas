<!DOCTYPE html>
<html>
<head>
<title>NYAN!</title>
<script type="text/javascript" src="../../superCanvas.js"></script>
</head>
<body>
<canvas width="500" height="500"></canvas>
<script>
window.addEventListener("load", function(){
        var tempCanvas = document.createElement("canvas");
        tempCanvas.width = 31;
        tempCanvas.height= 19;
        tempCtx = tempCanvas.getContext("2d");
        var canvas = document.querySelector("canvas");
        var ctx = canvas.getContext("2d");
        var images = [];
        var image = new Image();
        image.onload = function(){
                        console.log('HI');
                        for(var i = 3; i--;){
                                tempCanvas.width+=0;
                                tempCtx.drawImage(this, 0, -(i*19));
                                images.push(superCanvas.resizeImage(tempCanvas, tempCanvas.width*10, tempCanvas.height*10));
                        }
                                draw();
                                //console.log(images, loaded);
                };
        image.src="sprite.png";
        var bumps = [
                [0, -1], // Up
                [1, -1], //Top Right
                [1, 0 ], //right
                [1, 1 ], //bottom left;
                [0, 1 ], //down
                [-1,1 ], //bottom left
                [-1, 0], // left
                [-1, -1], //right 
                ];
        var draw = function(){
                canvas.width=(31+2)*10;
                canvas.height=(19+2)*10;
                for(var n = 0; n<images.length; n++){
                        var bumpX = bumpY = 1;
                        if(n===0){
                                bumpX += bumps[draw.frames%8][0];
                                bumpY += bumps[draw.frames%8][1];
                        }else if(n === 2){
                                bumpX += bumps[7-(draw.frames%8)][0];
                                bumpY += bumps[7-(draw.frames%8)][1];
                        }
                        ctx.drawImage(images[n], bumpX*10, bumpY*10);
                }
                draw.frames ++;
                setTimeout(draw, 1000/10);
        };
        draw.frames = 0;
}, false);
</script>
</body>
</html>
